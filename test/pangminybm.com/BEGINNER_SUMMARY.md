# 初学者实战总结：网站修复与部署

恭喜你！你成功修复了一个复杂的网站迁移问题。这个过程涵盖了前端调试、自动化脚本编写、Git 版本控制以及服务器运维等多个核心领域。

以下是本次实战的操作复盘与核心知识点总结。

---

## 1. 问题排查 (Debugging)

### 现象
- 网站轮播图不显示。
- 浏览器控制台 (F12 -> Console) 出现大量红色报错 (404 Not Found)。

### 核心知识点
- **404 Not Found**: 表示浏览器请求的资源（图片、JS 文件等）在服务器上找不到。
- **Webpack Chunks**: 现代前端框架（如 Elementor/React/Vue）通常会把代码拆分成多个小文件（chunks），按需动态加载。
  - *问题*: 我们只下载了主文件，没下载这些动态加载的小文件，导致功能缺失。
- **file:// 协议 vs HTTP 协议**:
  - 直接双击打开 HTML 文件是使用 `file://` 协议。由于安全限制（CORS），它无法加载很多动态资源，且路径解析规则与服务器不同。
  - *最佳实践*: 始终使用本地服务器（如 `python -m http.server`）来测试网页，模拟真实的 HTTP 环境。

---

## 2. 自动化修复 (Automation)

### 操作
我们编写了 Python 脚本 (`download_webpack_chunks.py`) 来自动分析和下载缺失文件。

### 核心知识点
- **正则提取 (Regex)**: 我们分析了 `webpack-runtime.js` 文件，利用正则表达式提取出所有可能的 chunk 文件名。
- **批量下载**: 使用 Python 的 `requests` 库循环下载文件。
- **反爬虫应对**:
  - 服务器拒绝了我们的请求 (406 Not Acceptable)，因为 Python 默认的“身份”被识别为爬虫。
  - *解决*: 我们添加了 `User-Agent` 请求头，伪装成普通浏览器（Chrome），并增加了随机延时 (`time.sleep`) 防止请求过快被封。

---

## 3. 代码修正 (Refactoring)

### 操作
修复了 Google reCAPTCHA 的链接错误。

### 核心知识点
- **相对路径 vs 绝对路径**:
  - 错误代码: `src="../../www.google.com/..."` (浏览器会把它当成当前网站下的文件)。
  - 正确代码: `src="https://www.google.com/..."` (告诉浏览器这是一个外部网站的资源)。
- **批量替换**: 使用 Python 脚本遍历所有 HTML 文件，利用 `re.sub` 进行精准的字符串替换，比手动修改几十个文件高效且不易出错。

---

## 4. Git 版本控制与网络问题 (Git & Networking)

### 操作
在服务器上同步代码时遇到了极大的困难（连接超时、Empty reply）。

### 核心知识点
- **Git 基本概念**:
  - `git add .` & `git commit`: 保存本地修改。
  - `git push`: 推送到远程仓库 (GitHub)。
  - `git fetch`: 从远程获取最新版本信息（但不合并）。
  - `git reset --hard origin/main`: 强制将本地代码重置为远程的最新状态（丢弃本地差异）。
- **版本一致性检查**:
  - `git rev-parse HEAD`: 查看本地当前的 Commit ID（身份证）。
  - `git ls-remote origin main`: 查看远程最新的 Commit ID。
  - *判断*: 如果两个 ID 不一样，说明代码没同步成功。
- **网络故障处理**:
  - 当 `git pull` 卡住时，我们尝试了修改 `hosts` 文件（指定 GitHub IP）、切换 HTTPS/SSH 协议。
  - *最终大招*: 写一个 `until` 循环脚本，不断重试直到成功。这在网络不稳定的环境下非常有效。

---

## 5. 经验总结

1. **不要相信 `file://`**: 本地测试一定要起服务 (`python -m http.server`)。
2. **看报错信息**: F12 控制台的红色 404 是解决问题的藏宝图。
3. **自动化思维**: 超过 3 个文件的重复操作，就值得写个脚本来做。
4. **Git 是真理**: 遇到服务器表现奇怪，先对比 Commit ID，确保代码版本一致。

加油！你已经从一个单纯的代码修改者，进阶到了能处理部署运维问题的开发者了！🚀
